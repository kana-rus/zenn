---
title: "合格発表の瞬間に内容をLINEへ送りたかった話"
emoji: "🌟"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["Go", "Heroku", "GAS", "LINE"]
published: false
---
初投稿です。よろしくお願いします。
# Introduction
大学入試が終わって合格発表を待ってる期間って暇ですよね。僕は暇でした。それで、せっかくなので高校生最後の思い出になるものを作りたいと思って、こんなことを考えました。
### Plan：
1. 合格発表ページをスクレイピングして合格した番号の一覧と自分の合否を調べるコードを書く
2. １のデータを返すAPIを作る
3. 合格発表のタイミング (3/10 12：00) に２のAPIを叩いてデータを取得し、メッセージとしてLINEに送る

それぞれ、「1：Go入門としてGoでスクレイピングしてみたい」「2：PaaS使ってみたい」「3：MessagingAPI使ってみたい」という理由があります。
対象ページは[京大工学部の合格発表ページ](https://daigakujc.jp/pa.php?u=31&h=24&f=19)です(3/17 17:00まで掲載)。では詳しく見ていきましょう。

# 1.スクレイピング
さっそくですが、重大な問題があります。勘のいい方or京大の先輩方は気づいたかもしれませんが、なんと合格発表前は対象ページがWeb上に存在しません。ページ自体が合格発表のタイミングで公開される仕様なので、事前にURLも分かりませんし、HTMLの構造も当然分かりません。これでは話が進まないので、YouTubeで京大の合格発表サイトが写っている動画を探しまくって情報収集しました。その結果分かったことは、
- 発表時刻に、[このページ](https://daigakujc.jp/pal.php?u=31&h=24)に各学科の名前のリンクが並ぶ
![](https://storage.googleapis.com/zenn-user-upload/c3b857af90a7-20220311.png =450x)
*発表前*
- "工学部"のリンクで飛んだ先が工学部の発表ページ。そのURLは上記ページのURLにクエリパラメータ"f=整数"がくっついた形をしているが、その整数は毎年同じとは限らず、予想がつかない
- 発表ページ自体は、簡単な説明と縦に並んだ番号があるだけ
![](https://storage.googleapis.com/zenn-user-upload/d9ac66054517-20220311.png =450x)
*これは発表後に撮った実際の写真だが、こんな感じのページだということは動画で事前に確認できた* 
くらいです。この条件で、後者のページから
- 合格した番号+アルファベット(画像参照)の一覧
- 自分の合否
を調べるのが目標です。前者ができれば後者は容易なので、前者をなんとかすることを考えることになります。